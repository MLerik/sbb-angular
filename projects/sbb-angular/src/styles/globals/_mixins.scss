// ----------------------------------------------------------------------------------------------------
// Mixins
// ----------------------------------------------------------------------------------------------------

@import 'variables';
@import 'functions';
@import 'mediaqueries';

/**
 * Hide visually
 *
 * See http://snook.ca/archives/html_and_css/hiding-content-for-accessibility
 * for discussion of different solutions
 */

@mixin visuallyhidden() {
	position: absolute;
	width: 1px;
	height: 1px;
	overflow: hidden;
	clip: rect(0 0 0 0);
	clip-path: inset(0 0 0 0);
	margin: -1px;
	padding: 0;
	border: 0;
}

/**
 * Contain floats with clearfix
 *
 * http://nicolasgallagher.com/micro-clearfix-hack/
 */

@mixin clearfix() {
	*zoom: 1;

	&:before,
	&:after {
		content: '';
		display: table;
	}

	&:after {
		clear: both;
	}
}

// Utilities
// ----------------------------------------------------------------------------------------------------
@mixin ellipsis() {
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

// Typo Styles
// ----------------------------------------------------------------------------------------------------
@mixin headline1 {
  font-family: $font-sbb-thin;
  font-size: px-to-rem($size-font-h1-default);
  color: $color-text;
	line-height: 1.2;
	margin: 2em 0 0;

	@include mq($from: tablet-portrait) {
		font-size: px-to-rem($size-font-h1-tablet);
  }

  @include mq($from: mobile-portrait) {
		font-size: px-to-rem($size-font-h1-mobile);
	}

	@include mq($from: desktop) {
		font-size: px-to-rem($size-font-h1-default);
	}

	@include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-h1-default4k); /* Factor 1.5 of Desktop */
	}

	@include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-h1-default5k); /* Factor 2 of Desktop */
	}
}

@mixin headline2 {
	font-family: $font-sbb-light;
	font-size: px-to-rem($size-font-h2-default);
  color: $color-text;
	line-height: 1.2;
	margin: 2em 0 0;

	@include mq($from: tablet-portrait) {
		font-size: px-to-rem($size-font-h2-tablet);
  }

  @include mq($from: mobile-portrait) {
		font-size: px-to-rem($size-font-h2-mobile);
	}

	@include mq($from: desktop) {
		font-size: px-to-rem($size-font-h2-default);
	}

	@include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-h2-default4k); /* Factor 1.5 of Desktop */
	}

	@include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-h2-default5k); /* Factor 2 of Desktop */
	}
}

@mixin headline3 {
	font-family: $font-sbb-light;
	font-size: px-to-rem($size-font-h3-default);
  color: $color-text;
	line-height: 1.3;
	margin: 2em 0 0;

	@include mq($from: tablet-portrait) {
		font-size: px-to-rem($size-font-h3-tablet);
  }

  @include mq($from: mobile-portrait) {
		font-size: px-to-rem($size-font-h3-mobile);
	}

	@include mq($from: desktop) {
		font-size: px-to-rem($size-font-h3-default);
	}

	@include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-h3-default4k);
  }

  @include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-h3-default5k);
	}

}

@mixin headline4 {
	font-family: $font-sbb-bold;
	font-size: px-to-rem($size-font-h4-default);
  color: $color-text;
	line-height: 1.5;
	margin: 2em 0 0;

  @include mq($from: mobile-portrait) {
		font-size: px-to-rem($size-font-h4-default);
	}

	@include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-h4-default-4k);
  }

  @include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-h4-default-5k);
	}
}

@mixin lead {
	font-family: $font-sbb-light;
	color: $color-text;
	font-size: px-to-rem($size-font-lead-text-default);
	line-height: 1.3;
	margin: 2em 0 0;

	@include mq($from: tablet-portrait) {
		font-size: px-to-rem($size-font-lead-text-tablet);
  }

  @include mq($from: mobile-portrait) {
		font-size: px-to-rem($size-font-lead-text-mobile);
	}

	@include mq($from: desktop) {
		font-size: px-to-rem($size-font-lead-text-default);
  }

  @include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-lead-text-default4k);
	}

  @include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-lead-text-default5k);
	}
}

@mixin copy {
	font-family: $font-sbb-roman;
	font-size: px-to-rem($size-font-default);
	color: $color-text;
  line-height: 1.5;
  text-indent: 1em;
  margin: 2em 0 0;

	@include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-default-4k);
	}

	@include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-default-5k);
	}
}

@mixin additionalinfo {
	font-family: $font-sbb-roman;
  font-size: px-to-em($size-font-additional-info-default);
  color: $color-black-60;
  line-height: 1.5;
  text-indent: 1em;
	margin: 2em 0 0;

	@include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-additional-info-default-4k);
	}

	@include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-additional-info-default-5k);
	}
}

@mixin ordered-lists {
	font-family: $font-sbb-roman;
  font-size: px-to-rem($size-font-default);
  color: $color-black;
  line-height: 1.5;
  margin-top: 2em;
  list-style-type: none;
  counter-reset: item;
  padding-left: 0;

  @include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-default4k);
	}

	@include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-default5k);
	}

  & > li {
    display: table;
    padding-left: 0;
  }

  & > li:before {
    content: counters(item, ".") ".";
    counter-increment: item;

    display: table-cell;
    padding-right: px-to-em(13, $size-font-default);
  }

  & ol,
  & ul {
		margin: px-to-em(6) 0 0 px-to-em(8);
  }

}

@mixin unordered-lists {
  font-family: $font-sbb-roman;
  font-size: px-to-rem($size-font-default);
  color: $color-black;
  margin-top: 2em;
  list-style-type: disc;
  padding-left: px-to-em(16);

  @include mq($from: desktop-4k) {
		font-size: px-to-rem($size-font-default4k);
	}

	@include mq($from: desktop-5k) {
		font-size: px-to-rem($size-font-default5k);
	}

	& li {
		padding-left: px-to-em(16 - 6);
  }

  & ol,
  & ul {
		margin: px-to-em(6) 0 0 px-to-em(8);
  }

	// if ol is nested inside ul, we need just 1 hierarchy level for the counter
	& li ol > li:before {
		content: counter(item) ".";
	}

}

// Button Styles
// ----------------------------------------------------------------------------------------------------
@mixin button-arrow-hover {
	padding-left: px-to-em(70, $size-font-default);
	padding-right: px-to-em(40, $size-font-default);
	transition: padding-left $linkicon-animation, padding-right $linkicon-animation, color $linkicon-animation;

	.mod-svgsprite-icon {
		transition: opacity $linkicon-animation, transform $linkicon-animation, fill $linkicon-animation;
	}

	sbb-icon-arrow-down:first-of-type svg.mod-svgsprite-icon {
		opacity: 1;
		transform: translateX(0);
	}

	sbb-icon-arrow-down:last-of-type svg.mod-svgsprite-icon {
		opacity: 0;
		transform: translateX(px-to-em(26));
	}

	&.var_center {
		padding-right: 0;
	}
}

@mixin arrow-buttons {
	position: relative;
	padding-left: to-em(40/$size-font-default);
	padding-right: to-em(70/$size-font-default);
	transition: height $linkicon-animation, padding-left $linkicon-animation, padding-right $linkicon-animation, color $linkicon-animation;

	.mod-svgsprite-icon {
		position: absolute;
		width: px-to-em(24, $size-font-default);
		height: px-to-em(24, $size-font-default);
		top: 50%;
		margin-top: px-to-em(-11.5, $size-font-default);
		transition: opacity $linkicon-animation, transform $linkicon-animation, fill $linkicon-animation;
		backface-visibility: hidden;
		fill: $color-white;
		pointer-events: none;
  }

  sbb-icon-arrow-down:first-of-type svg.mod-svgsprite-icon {
		margin-left: px-to-em(-30, $size-font-default);
		opacity: 0;
		transform: translateX(px-to-em(-26, $size-font-default));
  }

  sbb-icon-arrow-down:last-of-type svg.mod-svgsprite-icon {
    margin-left: px-to-em(6, $size-font-default);
		opacity: 1;
		transform: translateX(0px);
  }

	&:not(:disabled) {
    //TODO: cosa fare della class no-touchevents
		&:hover {
      @include button-arrow-hover;
		}

		&:focus {
			@include button-arrow-hover;
		}
	}


	&.var_center {
		text-align: center;
		padding-right: 0;
	}
}

@mixin buttons($font-size: $size-font-default) {
  @include ellipsis;
	box-sizing: border-box;
	height: to-em(48/$font-size);
	padding: to-em(12.5/$font-size) to-em(40/$font-size) to-em(15.5/$font-size) to-em(40/$font-size);
	text-decoration: none;
	display: inline-block;
	text-align: center;
  font-size: px-to-rem($font-size);
  font-family: $font-sbb-roman;
	line-height: 1.5;
	border: none;
	border-radius: to-em(2/$font-size);
  width: 100%;

	@include mq($from: tablet-portrait) {
    font-size: px-to-rem($font-size);

    width: auto;
    min-width: to-em(60/$font-size);
		max-width: to-em(400/$font-size);
	}

	@include mq($from: desktop) {
    font-size: px-to-rem($font-size);
	}

	@include mq($from: desktop-4k) {
		font-size: px-to-rem($font-size * $scaling-factor-4k);
    border-radius: to-em(3/$font-size);
	}

	@include mq($from: desktop-5k) {
		font-size: px-to-rem($font-size * $scaling-factor-5k);
    border-radius: to-em(4/$font-size);
	}

	&:not([disabled]) {
		&:hover,
		&:focus {
			cursor: pointer;
		}
	}
	&:disabled {
    background-color: $color-white;
    color: $color-grey;
    text-decoration: line-through;
    padding-right: to-em(40/$font-size);
    border: to-em(1/$font-size) solid $color-black-60;

    @include mq($from: desktop-4k) {
      border: to-em(2/$font-size) solid $color-black-60;
    }
	}
}

@mixin primary-button {
	@include buttons;

  color: $color-white;
  fill: $color-white;
  background-color: $colorCallToAction;

	&:not([disabled]) {
		&:hover,
		&:focus {
			background-color: $colorCallToActionHover;
      color: $color-white;

      .mod-svgsprite-icon {
				fill: $color-white;
      }
		}
	}
}

@mixin primary-button-icon {
  @include primary-button;
  @include arrow-buttons;

	.mod-svgsprite-icon {
		margin-top: px-to-em(-12, $size-font-default);
	}
}
